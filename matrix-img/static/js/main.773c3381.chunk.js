(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,r){e.exports=r(63)},59:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(13),i=r.n(a),c=r(2),s=r(3),l=r(6),u=r(4),m=r(7),d=r(16),p=r.n(d),h=r(29),f=r(26),w=r(10),v=r(11),b=r.n(v),g=r(9),y=function(e){return{type:"SET_ACTIVE_CARD",payload:e}},S=r(5),C=r(28),O=r.n(C),E=(r(59),38),R=37,j=40,_=39,k=27,x=256,F=10,I=function(e){var t=e.split("/");return t.splice(t.length-2,2,"300","200"),t.join("/")},A=function(e){var t=e.split("/");return t.splice(t.length-2,2,"600","400"),t.join("/")},B=(r(60),function(e){function t(){var e,r;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).cardRef=Object(n.createRef)(),r.setSourceImg=function(){r.picRef.srcset="".concat(I(r.props.url)," 1x, \n                          ").concat(A(r.props.url)," 2x")},r.createObserver=function(){var e=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(r.setSourceImg(),e=e.disconnect())})},{rootMargin:"200px"});e.observe(r.picRef)},r.handlerChangeActiveCard=function(e){e.preventDefault(),r.cardRef.current.focus(),r.props.setActiveCard({active:!0,number:r.props.number,row:r.props.row})},r.handlerBlur=function(){r.props.setActiveCard({active:!1,number:0,row:0})},r}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.IntersectionObserver?this.createObserver():this.setSourceImg()}},{key:"render",value:function(){var e=this,t={width:x};return o.a.createElement("a",{href:"/#",ref:this.cardRef,className:"card","data-number":this.props.number,"data-row":this.props.row,onClick:this.handlerChangeActiveCard,onFocus:this.handlerChangeActiveCard,onBlur:this.handlerBlur,style:t},o.a.createElement("picture",{className:"card__picture"},o.a.createElement("source",{type:"image/jpeg",ref:function(t){return e.picRef=t}}),o.a.createElement("img",{className:"card__img",alt:this.props.author})),this.props.activeFromState&&this.props.number===this.props.numberFromState&&o.a.createElement("div",{className:"card__info "+(this.cardRef.current.parentNode.clientWidth-this.cardRef.current.offsetLeft<2*this.cardRef.current.clientWidth?"card__info_right ":"")+(this.cardRef.current.parentNode.scrollHeight-this.cardRef.current.offsetTop<2*this.cardRef.current.clientHeight?"card__info_top ":"")},o.a.createElement("picture",{className:"card__picture"},o.a.createElement("source",{type:"image/jpeg",srcSet:A(this.props.url)}),o.a.createElement("img",{className:"card__img",alt:this.props.author})),o.a.createElement("div",{className:"card__text"},this.props.author)))}}]),t}(n.Component)),N=Object(g.b)(function(e){return{rowFromState:e.row,numberFromState:e.number,activeFromState:e.active}},function(e){return Object(S.a)({setActiveCard:y},e)})(B),T=(r(61),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"loader"},o.a.createElement("div",{className:"loader__item"},"Loading..."))}}]),t}(n.Component)),L=function(e){function t(){var e,r;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={images:[]},r.matrixRef=Object(n.createRef)(),r.getBodyScrollTop=function(){return(document.scrollingElement||document.documentElement).scrollTop},r.getBodyScrollLeft=function(){return(document.scrollingElement||document.documentElement).scrollLeft},r.moveMatrix=function(e){[R,_,E,j].indexOf(e.keyCode)>-1&&e.preventDefault(),e.keyCode===E?(window.scrollBy({top:window.innerHeight/3*-1,behavior:"smooth"}),0===r.getBodyScrollTop()&&window.scrollTo({top:r.matrixRef.current.scrollHeight,behavior:"smooth"})):e.keyCode===j?(window.scrollBy({top:window.innerHeight/3,behavior:"smooth"}),r.matrixRef.current.scrollHeight-r.getBodyScrollTop()<=window.innerHeight&&window.scrollTo({top:0,behavior:"smooth"})):e.keyCode===R?(window.scrollBy({left:window.innerWidth/3*-1,behavior:"smooth"}),0===r.getBodyScrollLeft()&&window.scrollTo({left:r.matrixRef.current.scrollWidth,behavior:"smooth"})):e.keyCode===_&&(window.scrollBy({left:window.innerWidth/3,behavior:"smooth"}),r.matrixRef.current.scrollWidth-r.getBodyScrollLeft()<=window.innerWidth&&window.scrollTo({left:0,behavior:"smooth"}))},r.nextItem=function(e){[R,_,E,j,k].indexOf(e.keyCode)>-1&&e.preventDefault(),e.keyCode===E&&r.props.rowFromState>0?(r.props.setActiveCard({active:!0,row:r.props.rowFromState-1,number:r.props.numberFromState-r.getCountInRow()}),r.scrollVertical(r.props.numberFromState)):e.keyCode===j&&r.props.rowFromState<parseInt((r.state.images.length-1)/r.getCountInRow())&&r.props.numberFromState+r.getCountInRow()<=r.state.images.length-1?(r.props.setActiveCard({active:!0,row:r.props.rowFromState+1,number:r.props.numberFromState+r.getCountInRow()}),r.scrollVertical(r.props.numberFromState)):e.keyCode===R&&r.props.numberFromState>0?(r.props.setActiveCard({active:!0,row:r.props.rowFromState,number:r.props.numberFromState-1}),r.scrollHorizontal(r.props.numberFromState),r.checkNextCardAndScroll(r.props.numberFromState)):e.keyCode===_&&r.props.numberFromState<r.state.images.length-1?(r.props.setActiveCard({active:!0,row:r.props.rowFromState,number:r.props.numberFromState+1}),r.scrollHorizontal(r.props.numberFromState),r.checkNextCardAndScroll(r.props.numberFromState)):27===e.keyCode&&r.props.setActiveCard({active:!1,row:0,number:0})},r.scrollVertical=function(e){var t=document.querySelector('a[data-number="'.concat(e,'"]')).getBoundingClientRect().top,r={};window.innerHeight-t<400?r.top=window.innerHeight/2:t<100&&(r.top=window.innerHeight/2*-1),window.scrollBy(Object(w.a)({},r,{behavior:"smooth"}))},r.scrollHorizontal=function(e){var t=document.querySelector('a[data-number="'.concat(e,'"]')).getBoundingClientRect().left,r={};window.innerWidth-t<400?r.left=window.innerWidth/2:t<100&&(r.left=window.innerWidth/2*-1),window.scrollBy(Object(w.a)({},r,{behavior:"smooth"}))},r.checkNextCardAndScroll=function(e){var t={};e%r.getCountInRow()===0&&(t.left=-1*r.matrixRef.current.scrollWidth),(e+1)%r.getCountInRow()===0&&(t.left=r.matrixRef.current.scrollWidth),window.scrollBy(Object(w.a)({},t,{behavior:"smooth"}))},r.getImages=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,b.a.all([b.a.get("https://picsum.photos/v2/list?page=2&limit=100"),b.a.get("https://picsum.photos/v2/list?page=3&limit=100"),b.a.get("https://picsum.photos/v2/list?page=4&limit=100")]);case 3:e.sent.forEach(function(e){t.push.apply(t,Object(h.a)(e.data))}),r.setState({images:t});case 6:case"end":return e.stop()}},e)})),r.getCountInRow=function(){var e=r.matrixRef.current.getBoundingClientRect().width;return parseInt(e/(x+F))},r}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){O.a.polyfill(),this.getImages(),document.addEventListener("keydown",this.moveMatrix)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown")}},{key:"componentDidUpdate",value:function(){this.props.activeFromState?(document.removeEventListener("keydown",this.moveMatrix),document.addEventListener("keydown",this.nextItem)):(document.removeEventListener("keydown",this.nextItem),document.addEventListener("keydown",this.moveMatrix))}},{key:"render",value:function(){var e=this,t={width:20*(F+x)};return o.a.createElement("div",{style:t,ref:this.matrixRef,className:"matrix"},0===this.state.images.length?o.a.createElement(T,null):this.state.images.map(function(t,r){return o.a.createElement(N,{key:r,url:t.download_url,number:r,author:t.author,row:parseInt(r/e.getCountInRow())})}))}}]),t}(n.Component),H=Object(g.b)(function(e){return{rowFromState:e.row,numberFromState:e.number,activeFromState:e.active}},function(e){return Object(S.a)({setActiveCard:y},e)})(L),W=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(H,null)}}]),t}(n.Component),D={active:!1,number:0,row:0},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_CARD":return Object(w.a)({},e,t.payload);default:return e}},V=Object(S.b)(M,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r(62);i.a.render(o.a.createElement(g.a,{store:V},o.a.createElement(W,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.773c3381.chunk.js.map